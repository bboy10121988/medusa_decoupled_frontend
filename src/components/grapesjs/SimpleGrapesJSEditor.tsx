"use client"import React, { useEffect, useRef, useState } from 'react'const SimpleGrapesJSEditor: React.FC = () => {  const editorContainerRef = useRef<HTMLDivElement>(null)  const [status, setStatus] = useState('æ­£åœ¨åˆå§‹åŒ–...')  const [error, setError] = useState<string | null>(null)  useEffect(() => {    let mounted = true    const initEditor = async () => {      try {        setStatus('æ­£åœ¨è¼‰å…¥ GrapesJS...')                // çŸ­æš«å»¶é²ç¢ºä¿ DOM æ¸²æŸ“å®Œæˆ        await new Promise(resolve => setTimeout(resolve, 500))                if (!mounted) return                if (!editorContainerRef.current) {          throw new Error('ç·¨è¼¯å™¨å®¹å™¨å…ƒç´ æœªæ‰¾åˆ°')        }        setStatus('æ­£åœ¨åˆå§‹åŒ–ç·¨è¼¯å™¨...')                // å‹•æ…‹å°å…¥ GrapesJS å’Œæ’ä»¶        const [{ default: grapesjs }, { default: blocksBasic }] = await Promise.all([          import('grapesjs'),          import('grapesjs-blocks-basic')        ])                if (!mounted) return        console.log('ğŸš€ é–‹å§‹åˆå§‹åŒ– GrapesJS ç·¨è¼¯å™¨...')        // åˆå§‹åŒ–ç·¨è¼¯å™¨        const editor = grapesjs.init({          container: editorContainerRef.current,          height: '100%',          width: 'auto',                    // å•Ÿç”¨åŸºæœ¬æ’ä»¶          plugins: [blocksBasic],                    // ç¦ç”¨å­˜å„²ç®¡ç†å™¨          storageManager: false,                    // é è¨­å…§å®¹          components: `            <div style="padding: 40px; font-family: Arial, sans-serif; text-align: center;">              <h1 style="color: #2c3e50; margin-bottom: 20px; font-size: 2.5em;">                ğŸ‰ GrapesJS ç·¨è¼¯å™¨æˆåŠŸè¼‰å…¥ï¼              </h1>              <p style="color: #7f8c8d; font-size: 1.2em; line-height: 1.6; margin-bottom: 30px;">                é€™æ˜¯ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„è¦–è¦ºåŒ–ç¶²é ç·¨è¼¯å™¨              </p>              <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin: 30px auto; max-width: 600px;">                <h3 style="margin: 0 0 15px 0;">âœ¨ ç·¨è¼¯å™¨åŠŸèƒ½</h3>                <ul style="text-align: left; margin: 0; padding-left: 20px; line-height: 1.8;">                  <li>ğŸ–±ï¸ é»æ“Šä»»ä½•å…ƒç´ é€²è¡Œé¸æ“‡</li>                  <li>âœï¸ é›™æ“Šæ–‡å­—é€²è¡Œç·¨è¼¯</li>                  <li>ğŸ¨ å³å´é¢æ¿èª¿æ•´æ¨£å¼</li>                  <li>ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆæ”¯æ´</li>                </ul>              </div>              <div style="background: #ecf0f1; padding: 25px; border-radius: 8px; border-left: 4px solid #3498db;">                <p style="margin: 0; color: #2c3e50; font-style: italic;">                  ğŸ’¡ æç¤ºï¼šå˜—è©¦ä¿®æ”¹é€™äº›æ–‡å­—å’Œæ¨£å¼ï¼Œé«”é©—ç·¨è¼¯å™¨çš„å¼·å¤§åŠŸèƒ½ï¼                </p>              </div>            </div>          `        })        // ç›£è½è¼‰å…¥å®Œæˆäº‹ä»¶        editor.on('load', () => {          if (mounted) {            setStatus('ç·¨è¼¯å™¨å·²å°±ç·’ï¼')            console.log('âœ… GrapesJS ç·¨è¼¯å™¨è¼‰å…¥å®Œæˆ')          }        })        // ç›£è½éŒ¯èª¤        editor.on('error', (err: any) => {          console.error('ç·¨è¼¯å™¨éŒ¯èª¤:', err)        })      } catch (err) {        console.error('åˆå§‹åŒ–å¤±æ•—:', err)        if (mounted) {          setError(err instanceof Error ? err.message : 'æœªçŸ¥éŒ¯èª¤')        }      }    }    initEditor()    return () => {      mounted = false    }  }, [])  if (error) {    return (      <div style={{        display: 'flex',        flexDirection: 'column',        alignItems: 'center',        justifyContent: 'center',        height: '100vh',        background: '#f8f9fa',        fontFamily: 'Arial, sans-serif'      }}>        <div style={{          background: 'white',          padding: '40px',          borderRadius: '12px',          boxShadow: '0 4px 20px rgba(0,0,0,0.1)',          textAlign: 'center',          maxWidth: '500px'        }}>          <div style={{ fontSize: '48px', marginBottom: '20px' }}>âŒ</div>          <h2 style={{ color: '#e74c3c', marginBottom: '15px' }}>ç·¨è¼¯å™¨è¼‰å…¥å¤±æ•—</h2>          <p style={{ color: '#7f8c8d', marginBottom: '25px', lineHeight: '1.6' }}>            {error}          </p>          <button            onClick={() => window.location.reload()}            style={{              background: '#3498db',              color: 'white',              border: 'none',              padding: '12px 24px',              borderRadius: '6px',              cursor: 'pointer',              fontSize: '16px',              fontWeight: '500'            }}          >            ğŸ”„ é‡æ–°è¼‰å…¥          </button>        </div>      </div>    )  }  return (    <div style={{ height: '100vh', display: 'flex', flexDirection: 'column', fontFamily: 'Arial, sans-serif' }}>      {/* é ‚éƒ¨ç‹€æ…‹æ¬„ */}      <div style={{        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',        color: 'white',        padding: '15px 25px',        display: 'flex',        alignItems: 'center',        justifyContent: 'space-between',        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'      }}>        <div>          <h1 style={{ margin: 0, fontSize: '20px', fontWeight: '600' }}>            ğŸ¨ GrapesJS è¦–è¦ºç·¨è¼¯å™¨          </h1>          <p style={{ margin: '5px 0 0 0', fontSize: '14px', opacity: 0.9 }}>            å°ˆæ¥­ç´šç¶²é è¦–è¦ºåŒ–ç·¨è¼¯å·¥å…·          </p>        </div>        <div style={{          background: 'rgba(255,255,255,0.2)',          padding: '8px 16px',          borderRadius: '20px',          fontSize: '14px'        }}>          {status}        </div>      </div>      {/* ä¸»è¦ç·¨è¼¯å™¨å®¹å™¨ */}      <div style={{ flex: 1, position: 'relative', background: '#ffffff' }}>        <div           ref={editorContainerRef}          style={{             height: '100%',             width: '100%',            border: 'none'          }}        >          {/* è¼‰å…¥æŒ‡ç¤ºå™¨ */}          {!error && (            <div style={{              display: 'flex',              alignItems: 'center',              justifyContent: 'center',              height: '100%',              color: '#6c757d'            }}>              <div style={{                textAlign: 'center'              }}>                <div style={{                  width: '50px',                  height: '50px',                  border: '5px solid #f3f3f3',                  borderTop: '5px solid #667eea',                  borderRadius: '50%',                  animation: 'spin 1s linear infinite',                  margin: '0 auto 20px'                }}></div>                <p>{status}</p>              </div>            </div>          )}        </div>      </div>      {/* CSS å‹•ç•«å’Œæ¨£å¼ */}      <style jsx>{`        @keyframes spin {          0% { transform: rotate(0deg); }          100% { transform: rotate(360deg); }        }      `}</style>      {/* GrapesJS å…¨å±€æ¨£å¼è¦†è“‹ */}      <style jsx global>{`        .gjs-frame {          border: none ;        }                .gjs-cv-canvas {          background: #ffffff ;        }                .gjs-toolbar {          background: rgba(255,255,255,0.95) ;          border: 1px solid #e9ecef ;          border-radius: 6px ;          box-shadow: 0 2px 10px rgba(0,0,0,0.1) ;        }      `}</style>    </div>  )}export default SimpleGrapesJSEditor