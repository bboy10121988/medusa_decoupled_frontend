# VM vs Local ä»£ç¢¼æ¯”è¼ƒåˆ†æå ±å‘Š

## ğŸ“‹ çµæ§‹å°æ¯”åˆ†æ

### âœ… **ç›¸åŒä¸”å·²åŒæ­¥çš„éƒ¨åˆ†**
1. **ç”¢å“ç›¸é—œçµ„ä»¶** - `/src/modules/products/components/` ç›®éŒ„çµæ§‹ä¸€è‡´
2. **é…ç½®æ–‡ä»¶** - `src/lib/config.ts` åŸºæœ¬ä¸€è‡´
3. **è³¼ç‰©è»Šé‚è¼¯** - `src/lib/data/cart.ts` å·²ä½¿ç”¨ HttpTypes
4. **ç”¢å“æ•¸æ“š** - `src/lib/data/products.ts` å·²åŒæ­¥ VM çš„ getProduct å‡½æ•¸

### âš ï¸ **VM æœ‰ä½†æœ¬åœ°ç¼ºå¤±çš„é‡è¦æ–‡ä»¶**

#### 1. ä¿ƒéŠ·ç³»çµ±æ–‡ä»¶ (é«˜å„ªå…ˆç´š)
- `src/promotion-utils.ts` (907 è¡Œ) - **å®Œæ•´çš„ä¿ƒéŠ·æ¨™ç±¤å’ŒæŠ˜æ‰£è¨ˆç®—ç³»çµ±**
- `src/simple-promotion-utils.ts` - ç°¡åŒ–ç‰ˆä¿ƒéŠ·å·¥å…·

#### 2. API å·¥å…·æ–‡ä»¶
- `src/medusa-api.ts` - å„ªåŒ–çš„ Medusa API å®¢æˆ¶ç«¯
- `src/request-deduplicator.ts` - è«‹æ±‚å»é‡å·¥å…·

#### 3. çµ„ä»¶å’Œä¸Šä¸‹æ–‡æ–‡ä»¶
- `src/components/ThemeSwitcher.tsx` - ä¸»é¡Œåˆ‡æ›å™¨
- `src/context/` ç›®éŒ„ä¸‹å¤šå€‹ä¸Šä¸‹æ–‡æ–‡ä»¶
  - `cart-context.tsx`
  - `region-context.tsx`
  - `ThemeContext.tsx`
  - `modal-context.tsx`
  - `product-context.tsx`

#### 4. å·¥å…·æ–‡ä»¶
- `src/cache.ts` - å¿«å–ç®¡ç†
- `src/seo.ts` - SEO å·¥å…·
- `src/store-name.ts` - å•†åº—åç¨±ç®¡ç†

### ğŸ”„ **é¡å‹ç³»çµ±å·®ç•° (éœ€ä¿®å¾©)**

#### æœ¬åœ°ä»ä½¿ç”¨ LocalHttpTypes çš„æ–‡ä»¶ï¼š
1. `src/lib/data/regions.ts` âŒ
2. `src/lib/data/collections.ts` âŒ
3. `src/lib/data/categories.ts` âŒ

#### VM çµ±ä¸€ä½¿ç”¨ HttpTypesï¼š
- æ‰€æœ‰æ•¸æ“šå±¤æ–‡ä»¶éƒ½ä½¿ç”¨ `@medusajs/types` çš„ `HttpTypes`

### ğŸ“¦ **ä¾è³´ç‰ˆæœ¬å·®ç•°**

#### VM ç‰ˆæœ¬ï¼š
- `next`: "^15.3.1" 
- ç°¡æ½”çš„ä¾è³´é…ç½®

#### æœ¬åœ°ç‰ˆæœ¬ï¼š
- `next`: "^15.5.2"
- æ›´å¤šé¡å¤–ä¾è³´ (FontAwesome, Mux, ioredis ç­‰)

## ğŸ¯ **é‡çµ„å»ºè­°**

### Phase 1: é¡å‹çµ±ä¸€ (ç«‹å³åŸ·è¡Œ)
1. å°‡ `regions.ts`, `collections.ts`, `categories.ts` æ”¹ç‚ºä½¿ç”¨ `HttpTypes`
2. ç¢ºä¿æ‰€æœ‰æ•¸æ“šå±¤æ–‡ä»¶é¡å‹ä¸€è‡´

### Phase 2: æ ¸å¿ƒåŠŸèƒ½åŒæ­¥ (é«˜å„ªå…ˆç´š)
1. åŒæ­¥ `promotion-utils.ts` - å®Œæ•´çš„ä¿ƒéŠ·ç³»çµ±
2. åŒæ­¥ `medusa-api.ts` - å„ªåŒ–çš„ API å®¢æˆ¶ç«¯
3. æ·»åŠ  `cache.ts` - å¿«å–ç®¡ç†åŠŸèƒ½

### Phase 3: çµ„ä»¶å’Œä¸Šä¸‹æ–‡ (ä¸­å„ªå…ˆç´š)  
1. åŒæ­¥ç¼ºå¤±çš„ä¸Šä¸‹æ–‡æ–‡ä»¶
2. æ·»åŠ  `ThemeSwitcher.tsx`
3. æ›´æ–°ç›¸é—œçµ„ä»¶ä½¿ç”¨æ–°çš„ä¸Šä¸‹æ–‡

### Phase 4: å·¥å…·å’Œå„ªåŒ– (ä½å„ªå…ˆç´š)
1. åŒæ­¥ SEO å’Œå…¶ä»–å·¥å…·æ–‡ä»¶
2. è©•ä¼°ä¸¦æ•´åˆæœ‰ç”¨çš„å„ªåŒ–åŠŸèƒ½

## ğŸš€ **æ¨è–¦çš„æœ€ä½³ä»£ç¢¼çµ„åˆ**

### ä¿æŒæœ¬åœ°å„ªå‹¢ï¼š
- æ›´æ–°çš„ Next.js ç‰ˆæœ¬ (15.5.2)
- Sanity CMS é›†æˆ
- è¯ç›Ÿè¡ŒéŠ·ç³»çµ±
- ECPay æ”¯ä»˜é›†æˆ

### å¾ VM ç²å–ï¼š
- ä¿ƒéŠ·ç³»çµ± (`promotion-utils.ts`)
- çµ±ä¸€çš„é¡å‹ç³»çµ± (HttpTypes)
- å„ªåŒ–çš„ API å®¢æˆ¶ç«¯
- å¿«å–ç®¡ç†ç³»çµ±

### æ··åˆç­–ç•¥ï¼š
- ä¿æŒæœ¬åœ°çš„åŠŸèƒ½æ“´å±•
- æ¡ç”¨ VM çš„æ ¸å¿ƒç©©å®šæ€§
- çµ±ä¸€é¡å‹ç³»çµ±ä¿è­‰å…¼å®¹æ€§
