import { createClient } from '@sanity/client'
import * as dotenv from 'dotenv'
import { resolve } from 'path'

dotenv.config({ path: resolve(__dirname, '../.env.local') })

const client = createClient({
    projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID || '',
    dataset: process.env.NEXT_PUBLIC_SANITY_DATASET || '',
    apiVersion: '2024-01-01',
    useCdn: false,
    token: process.env.SANITY_API_TOKEN
})

// è‡ªç„¶èªè¨€ç¿»è­¯ï¼ˆç”± AI æä¾›ï¼‰
const naturalTranslations: Record<string, any> = {
    'mens-wash-cut-scalp-spray': {
        title: 'ãƒ¡ãƒ³ã‚ºã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆï¼ˆé ­çš®ã‚¹ãƒ—ãƒ¬ãƒ¼ä»˜ãï¼‰',
        body: [
            { text: 'ãƒ¡ãƒ³ã‚ºã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆï¼ˆé ­çš®ã‚¹ãƒ—ãƒ¬ãƒ¼ä»˜ãï¼‰ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚µãƒ¼ãƒ“ã‚¹', style: 'h2' },
            { text: 'é ­çš®ã‚¹ãƒ—ãƒ¬ãƒ¼ã‚±ã‚¢ã‚’å«ã‚€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªãƒ¡ãƒ³ã‚ºã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚çµŒé¨“è±Šå¯Œãªã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆãŒã€ãŠå®¢æ§˜ä¸€äººã²ã¨ã‚Šã®é«ªè³ªã‚„é ­çš®ã®çŠ¶æ…‹ã«åˆã‚ã›ã¦ã€æœ€é©ãªã‚±ã‚¢ã‚’è¡Œã„ã¾ã™ã€‚', style: 'normal' },
            { text: 'ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹', style: 'h3' },
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ - é ­çš®ã¨é«ªã‚’å„ªã—ãæ´—æµ„ã—ã€æ¸…æ½”ãªçŠ¶æ…‹ã«æ•´ãˆã¾ã™', style: 'normal' },
            { text: 'ç²¾å¯†ã‚«ãƒƒãƒˆ - ãŠå®¢æ§˜ã®é¡”ç«‹ã¡ã‚„ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸç†æƒ³çš„ãªãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™', style: 'normal' },
            { text: 'é ­çš®ã‚¹ãƒ—ãƒ¬ãƒ¼ã‚±ã‚¢ - å°‚ç”¨ã®é ­çš®ã‚¹ãƒ—ãƒ¬ãƒ¼ã§é ­çš®ç’°å¢ƒã‚’æ•´ãˆã€å¥åº·ãªé«ªã®æˆé•·ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™', style: 'normal' },
            { text: 'ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚¢ãƒ‰ãƒã‚¤ã‚¹ - ã”è‡ªå®…ã§ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°æ–¹æ³•ã‚’ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã—ã¾ã™', style: 'normal' },
            { text: 'ã™ã¹ã¦ã®é«ªè³ªã«å¯¾å¿œã—ã€å¥åº·ã§ç¾ã—ã„é«ªã‚’ä¿ã¤ãŠæ‰‹ä¼ã„ã‚’ã„ãŸã—ã¾ã™ã€‚ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹ç©ºé–“ã§ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚', style: 'normal' },
        ]
    },
    'wash-cut-eyebrow': {
        title: 'ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆãƒ»çœ‰ã‚«ãƒƒãƒˆ',
        body: [
            { text: 'ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ãƒ»ã‚«ãƒƒãƒˆãƒ»çœ‰ã‚«ãƒƒãƒˆç·åˆã‚µãƒ¼ãƒ“ã‚¹', style: 'h2' },
            { text: 'ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ã€ã‚«ãƒƒãƒˆã€çœ‰ã‚«ãƒƒãƒˆã‚’å«ã‚€å®Œå…¨ãªãƒ¡ãƒ³ã‚ºã‚°ãƒ«ãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚é ­ã‹ã‚‰é¡”ã¾ã§ã€ãƒˆãƒ¼ã‚¿ãƒ«ã§ãŠå®¢æ§˜ã®é­…åŠ›ã‚’å¼•ãå‡ºã—ã¾ã™ã€‚', style: 'normal' },
            { text: 'ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹', style: 'h3' },
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ - é ­çš®ã¨é«ªã‚’ä¸å¯§ã«æ´—æµ„ã—ã¾ã™', style: 'normal' },
            { text: 'ç²¾å¯†ã‚«ãƒƒãƒˆ - ãŠå®¢æ§˜ã«æœ€é©ãªãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™', style: 'normal' },
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«çœ‰ã‚«ãƒƒãƒˆ - é¡”ã®å°è±¡ã‚’æ•´ãˆã‚‹çœ‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚«ãƒƒãƒˆã‚’è¡Œã„ã¾ã™', style: 'normal' },
            { text: 'å®Œç’§ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚‹ - ãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã¨çœ‰ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®ã—ãŸç·åˆçš„ãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã‚’æä¾›ã—ã¾ã™', style: 'normal' },
            { text: 'é ­ã‹ã‚‰é¡”ã¾ã§æœ€é«˜ã®çŠ¶æ…‹ã‚’æ¼”å‡ºã—ã€è‡ªä¿¡ã«æº€ã¡ãŸå°è±¡ã‚’ä½œã‚Šå‡ºã—ã¾ã™ã€‚', style: 'normal' },
        ]
    },
    'mens-perm': {
        title: 'ãƒ¡ãƒ³ã‚ºãƒ‘ãƒ¼ãƒ',
        body: [
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ¡ãƒ³ã‚ºãƒ‘ãƒ¼ãƒã‚µãƒ¼ãƒ“ã‚¹', style: 'h2' },
            { text: 'é«˜å“è³ªãªãƒ‘ãƒ¼ãƒè£½å“ã‚’ä½¿ç”¨ã—ã€ãŠå®¢æ§˜ã®ç†æƒ³çš„ãªãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚é«ªè³ªã‚„ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ¬ãƒ™ãƒ«ã‚’è€ƒæ…®ã—ã€æœ€é©ãªãƒ‘ãƒ¼ãƒæŠ€è¡“ã‚’é¸æŠã—ã¾ã™ã€‚', style: 'normal' },
            { text: 'ãƒ‘ãƒ¼ãƒã®ç¨®é¡', style: 'h3' },
            { text: 'ã‚³ãƒ¼ãƒ«ãƒ‰ãƒ‘ãƒ¼ãƒ - è‡ªç„¶ãªä»•ä¸ŠãŒã‚Šã§ã€æŸ”ã‚‰ã‹ã„ã‚«ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã™', style: 'normal' },
            { text: 'ãƒ›ãƒƒãƒˆãƒ‘ãƒ¼ãƒ - ã—ã£ã‹ã‚Šã¨ã—ãŸã‚«ãƒ¼ãƒ«ã§ã€é•·æŒã¡ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å®Ÿç¾ã—ã¾ã™', style: 'normal' },
            { text: 'ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãƒ‘ãƒ¼ãƒ - ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¢ãƒƒãƒ—ã‚„å‹•ãã®ã‚ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™', style: 'normal' },
            { text: 'é«ªè³ªã¨ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦ã€æœ€é©ãªãƒ‘ãƒ¼ãƒãƒ—ãƒ©ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãŒç°¡å˜ã§ã€æ¯æ—¥ã®ãƒ˜ã‚¢ã‚»ãƒƒãƒˆãŒæ¥½ã«ãªã‚Šã¾ã™ã€‚', style: 'normal' },
        ]
    },
    'scalp-care': {
        title: 'ã‚¹ã‚«ãƒ«ãƒ—ã‚±ã‚¢',
        body: [
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«é ­çš®ã‚±ã‚¢ã‚µãƒ¼ãƒ“ã‚¹', style: 'h2' },
            { text: 'é ­çš®ã‚’æ·±ãã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã—ã€å¥åº·ãªé«ªã®æˆé•·ã‚’ä¿ƒé€²ã—ã¾ã™ã€‚å°‚é–€çš„ãªé ­çš®è¨ºæ–­ã‹ã‚‰å§‹ã¾ã‚Šã€ãŠå®¢æ§˜ã®é ­çš®çŠ¶æ…‹ã«åˆã‚ã›ãŸã‚±ã‚¢ã‚’æä¾›ã—ã¾ã™ã€‚', style: 'normal' },
            { text: 'ã‚±ã‚¢ã®æµã‚Œ', style: 'h3' },
            { text: 'é ­çš®è¨ºæ–­ - å°‚é–€æ©Ÿå™¨ã‚’ä½¿ç”¨ã—ã¦é ­çš®ã®çŠ¶æ…‹ã‚’è©³ã—ãç¢ºèªã—ã¾ã™', style: 'normal' },
            { text: 'ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚° - æ¯›ç©´ã®æ±šã‚Œã‚„ä½™åˆ†ãªçš®è„‚ã‚’å¾¹åº•çš„ã«é™¤å»ã—ã¾ã™', style: 'normal' },
            { text: 'é ­çš®ãƒãƒƒã‚µãƒ¼ã‚¸ - è¡€è¡Œã‚’ä¿ƒé€²ã—ã€ãƒªãƒ©ãƒƒã‚¯ã‚¹åŠ¹æœã‚‚å¾—ã‚‰ã‚Œã¾ã™', style: 'normal' },
            { text: 'æ „é¤Šã‚±ã‚¢ - é ­çš®ã«å¿…è¦ãªæ „é¤Šã‚’è£œçµ¦ã—ã€å¥åº·ãªçŠ¶æ…‹ã‚’ä¿ã¡ã¾ã™', style: 'normal' },
            { text: 'é ­çš®ç’°å¢ƒã‚’æ”¹å–„ã—ã€æŠœã‘æ¯›ã‚„è–„æ¯›ã®äºˆé˜²ã«åŠ¹æœçš„ã§ã™ã€‚å®šæœŸçš„ãªã‚±ã‚¢ã§ã€å¥åº·ãªé«ªã‚’è‚²ã¦ã¾ã—ã‚‡ã†ã€‚', style: 'normal' },
        ]
    },
    'mens-haircut': {
        title: 'ãƒ¡ãƒ³ã‚ºã‚«ãƒƒãƒˆ',
        body: [
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ¡ãƒ³ã‚ºã‚«ãƒƒãƒˆã‚µãƒ¼ãƒ“ã‚¹', style: 'h2' },
            { text: 'çµŒé¨“è±Šå¯Œãªã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆãŒã‚ãªãŸå°‚ç”¨ã®ãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’æŠ¼ã•ãˆãªãŒã‚‰ã€ãŠå®¢æ§˜ã®å€‹æ€§ã‚’æ´»ã‹ã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ã‚’ææ¡ˆã—ã¾ã™ã€‚', style: 'normal' },
            { text: 'ã‚¹ã‚¿ã‚¤ãƒ«ã®ç¨®é¡', style: 'h3' },
            { text: 'ãƒ“ã‚¸ãƒã‚¹ã‚¹ã‚¿ã‚¤ãƒ« - æ¸…æ½”æ„ŸãŒã‚ã‚Šã€ãƒ“ã‚¸ãƒã‚¹ã‚·ãƒ¼ãƒ³ã«æœ€é©ãªã‚¹ã‚¿ã‚¤ãƒ«', style: 'normal' },
            { text: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« - ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’å–ã‚Šå…¥ã‚ŒãŸã€ãŠã—ã‚ƒã‚Œãªã‚¹ã‚¿ã‚¤ãƒ«', style: 'normal' },
            { text: 'å€‹æ€§çš„ãƒ‡ã‚¶ã‚¤ãƒ³ - ãŠå®¢æ§˜ã®å€‹æ€§ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¹ã‚¿ã‚¤ãƒ«', style: 'normal' },
            { text: 'é¡”ã®å½¢ã¨å€‹äººã®ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ã¦ã€æœ€é©ãªãƒ˜ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ã‚’å¤§åˆ‡ã«ã—ã€æº€è¶³ã„ãŸã ã‘ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚', style: 'normal' },
        ]
    },
    'mens-hair-dye': {
        title: 'ãƒ¡ãƒ³ã‚ºãƒ˜ã‚¢ã‚«ãƒ©ãƒ¼',
        body: [
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ¡ãƒ³ã‚ºãƒ˜ã‚¢ã‚«ãƒ©ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹', style: 'h2' },
            { text: 'ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¹ã®ãƒ˜ã‚¢ã‚«ãƒ©ãƒ¼è£½å“ã‚’ä½¿ç”¨ã—ã€å®‰å…¨ã§é•·æŒã¡ã™ã‚‹ã‚«ãƒ©ãƒ¼ãƒªãƒ³ã‚°ã‚’æä¾›ã—ã¾ã™ã€‚é«ªã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’æœ€å°é™ã«æŠ‘ãˆãªãŒã‚‰ã€ç†æƒ³ã®è‰²ã‚’å®Ÿç¾ã—ã¾ã™ã€‚', style: 'normal' },
            { text: 'ã‚«ãƒ©ãƒ¼ã®ç¨®é¡', style: 'h3' },
            { text: 'ãƒ•ãƒ«ã‚«ãƒ©ãƒ¼ - å…¨ä½“ã‚’å‡ä¸€ã«æŸ“ã‚ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒã‚§ãƒ³ã‚¸ã‚’å›³ã‚Šã¾ã™', style: 'normal' },
            { text: 'ãƒã‚¤ãƒ©ã‚¤ãƒˆ - éƒ¨åˆ†çš„ã«æ˜ã‚‹ã„è‰²ã‚’å…¥ã‚Œã€ç«‹ä½“æ„Ÿã‚’å‡ºã—ã¾ã™', style: 'normal' },
            { text: 'ç™½é«ªæŸ“ã‚ - è‡ªç„¶ãªä»•ä¸ŠãŒã‚Šã§ç™½é«ªã‚’ã‚«ãƒãƒ¼ã—ã¾ã™', style: 'normal' },
            { text: 'ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚«ãƒ©ãƒ¼ - ãƒˆãƒ¬ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ã§å€‹æ€§ã‚’è¡¨ç¾ã—ã¾ã™', style: 'normal' },
            { text: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªã‚«ãƒ©ãƒ¼ãƒªãƒ³ã‚°ã§ã€ã‚ãªãŸã®å€‹æ€§çš„ãªé­…åŠ›ã‚’å¼•ãå‡ºã—ã¾ã™ã€‚ã‚«ãƒ©ãƒ¼å¾Œã®ã‚±ã‚¢ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚‚ä¸å¯§ã«è¡Œã„ã¾ã™ã€‚', style: 'normal' },
        ]
    }
}

async function updateWithNaturalTranslation() {
    console.log('ğŸŒ è‡ªç„¶èªè¨€ç¿»è­¯æ›´æ–°ä¸­...\n')

    const query = `*[_type == "post" && language == "ja-JP"] {
    _id,
    "slug": slug.current
  }`

    const posts = await client.fetch(query)

    for (const post of posts) {
        const translation = naturalTranslations[post.slug]

        if (!translation) {
            console.log(`â­ï¸  è·³é ${post.slug}: æ²’æœ‰ç¿»è­¯`)
            continue
        }

        console.log(`ğŸ“„ æ›´æ–°: ${translation.title}`)

        // æ§‹å»º Portable Text æ ¼å¼
        const body = translation.body.map((item: any, index: number) => ({
            _key: `block${index + 1}`,
            _type: 'block',
            style: item.style,
            children: [
                {
                    _key: `span${index + 1}`,
                    _type: 'span',
                    text: item.text,
                    marks: []
                }
            ],
            markDefs: []
        }))

        try {
            await client
                .patch(post._id)
                .set({ body })
                .commit()
            console.log(`   âœ… å·²æ›´æ–°`)
        } catch (error) {
            console.error(`   âŒ éŒ¯èª¤:`, error)
        }
    }

    console.log('\nâœ¨ å®Œæˆï¼')
}

updateWithNaturalTranslation().catch(console.error)
